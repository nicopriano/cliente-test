!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("react-helmet")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("serialize-javascript")},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(5),a=r.n(n),i=r(6),c=r.n(i),o=r(0),u=r.n(o),l=r(4),s=r.n(l),m=r(7),f=r.n(m),p=(r(9),r(1));function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(){var e=d(Object(o.useState)(""),2),t=e[0],r=e[1],n=d(Object(o.useState)(!1),2),a=n[0],i=n[1],c=function(){i(!0)};return a?u.a.createElement(p.Redirect,{to:{pathname:"/items",search:"?search=".concat(t)},push:!0}):u.a.createElement("form",{className:"search-bar-container",onSubmit:c},u.a.createElement("article",{className:"logo-input-container"},u.a.createElement(p.Link,{to:"/"},u.a.createElement("aside",{className:"logo"})),u.a.createElement("input",{value:t,onChange:function(e){return r(e.target.value)},className:"search-input",type:"search",placeholder:"Nunca dejes de buscar"}),u.a.createElement("div",{className:"search-btn",onClick:c})))}var h=r(3);function b(){return u.a.createElement("div",null,u.a.createElement(h.Helmet,null,u.a.createElement("title",null,"Mercado Libre Argentina")))}function g(e){var t=e.items,r=e.action;return u.a.createElement("div",{className:"items-list"},t.map((function(e){return u.a.createElement("div",{className:"item-container",key:e.id,onClick:function(){return r(e.id)}},u.a.createElement("aside",{className:"foto",style:{backgroundImage:'url("'.concat(e.picture,'")'),backgroundSize:"cover"}}),u.a.createElement("article",{className:"item-info"},u.a.createElement("h3",{className:"precio"},e.price.currency," ",e.price.amount),u.a.createElement("h6",{className:"lugar"},e.address),u.a.createElement("h5",{className:"titulo"},e.title),e.free_shipping?u.a.createElement("div",{className:"free-shipping-container"},u.a.createElement("div",{className:"free-shipping-icn"}),u.a.createElement("p",{className:"free-shipping-tag"},"Envio ",u.a.createElement("b",null,"gratuito"))):null))})))}function E(e){var t=e.tags;return u.a.createElement("div",{className:"breadcrumbs"},t&&t.length?t.map((function(e){return u.a.createElement("span",{className:"category",key:e},e)})):null)}var _=r(2),w=r.n(_);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e){var t=S(Object(o.useState)(null),2),r=t[0],n=t[1],a=S(Object(o.useState)([]),2),i=a[0],c=a[1],l=S(Object(o.useState)([]),2),s=l[0],m=l[1],f=Object(p.useLocation)(),d=new URLSearchParams(f.search).get("search");Object(o.useEffect)((function(){window.__ROUTE_DATA__?(c(window.__ROUTE_DATA__.items),m(window.__ROUTE_DATA__.categories),delete window.__ROUTE_DATA__):e.staticContext&&e.staticContext.data?c(e.staticContext.data.item):w.a.get("/items?search=".concat(d)).then((function(e){document.open(),document.write(e.data),document.close()}))}),[]);return r?u.a.createElement(p.Redirect,{to:{pathname:"/items/".concat(r)},push:!0}):u.a.createElement("div",{className:"items-list-container"},u.a.createElement(h.Helmet,null,u.a.createElement("title",null,d||"Resultados"," en Mercado Libre")),u.a.createElement(E,{tags:s}),u.a.createElement(g,{items:i,action:function(e){n(e)}}))}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e){var t=e.pictures,r=N(Object(o.useState)(""),2),n=r[0],a=r[1];return Object(o.useEffect)((function(){t&&t.length&&t[0]&&a(t[0].url)}),[t]),u.a.createElement("div",{className:"gallery-container"},u.a.createElement("aside",{className:"list-of-images"},t.map((function(e){return u.a.createElement("div",{className:"mini-pic",onMouseOver:function(){return a(e.url)},key:e.id,style:{backgroundImage:"url('".concat(e.url,"')")}})}))),u.a.createElement("main",{className:"large-pic",style:{backgroundImage:"url('".concat(n,"')")}}))}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e){var t=R(Object(o.useState)(null),2),r=t[0],n=t[1],a=Object(p.useParams)().id;return Object(o.useEffect)((function(){window.__ROUTE_DATA__?(n(window.__ROUTE_DATA__.item),delete window.__ROUTE_DATA__):e.staticContext&&e.staticContext.data?n(e.staticContext.data.item):w.a.get("/items/".concat(a)).then((function(e){document.open(),document.write(e.data),document.close()}))}),[]),r?u.a.createElement("div",{className:"item-detail-container"},u.a.createElement(h.Helmet,null,u.a.createElement("title",null,r.title," - Test Mercado Libre")),u.a.createElement(E,{tags:r.categories}),u.a.createElement("main",{className:"item-detail"},u.a.createElement("article",{className:"item-description-column"},u.a.createElement(j,{pictures:r.pictures}),u.a.createElement("div",{className:"item-info-container"},u.a.createElement("div",{className:"item-description-container"},u.a.createElement("h6",{className:"description-tag"},"Descripción del producto"),u.a.createElement("div",{className:"description"},u.a.createElement("p",null,r.description))))),u.a.createElement("aside",{className:"item-buy-info-column"},u.a.createElement("div",{className:"item-info-wrapper"},u.a.createElement("p",{className:"above-title"},"new"===r.condition?"Nuevo":"Usado"," - ",r.sold_quantity," vendidos"),u.a.createElement("h6",{className:"title"},r.title),u.a.createElement("h6",{className:"price"},r.price.currency," ",r.price.amount),r.free_shipping?u.a.createElement("div",{className:"free-shipping-container"},u.a.createElement("div",{className:"free-shipping-icn"}),u.a.createElement("p",{className:"free-shipping-tag"},"Envio ",u.a.createElement("b",null,"gratuito"))):null,u.a.createElement("button",{class:"buy-btn"},"Comprar ahora"))))):u.a.createElement("div",null)}var C=function(){return u.a.createElement("div",{className:"App light"},u.a.createElement(v,null),u.a.createElement("article",{className:"base-container"},u.a.createElement(p.Switch,null,u.a.createElement(p.Route,{path:"/",exact:!0,component:b}),u.a.createElement(p.Route,{path:"/items",strict:!0,exact:!0,component:A}),u.a.createElement(p.Route,{path:"/items/:id",component:k}))))},I=r(8),U=r.n(I);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r,n,a,i,c){try{var o=e[i](c),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,a)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function c(e){M(i,n,a,c,o,"next",e)}function o(e){M(i,n,a,c,o,"throw",e)}c(void 0)}))}}var L=function(){var e=D(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.query.search){e.next=4;break}return e.next=3,H(t.query.search);case 3:t.meliContext=e.sent;case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),$=function(){var e=D(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t.params.id);case 2:t.meliContext=e.sent,n();case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),H=function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://api.mercadolibre.com/sites/MLA/search?q=".concat(t,"&limit=4"));case 2:return r=e.sent,n=r.data,e.t0={name:"Nicolás",lastname:"Priano"},e.next=7,Promise.all(n.results.map(function(){var e=D(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://api.mercadolibre.com/currencies/".concat(t.currency_id));case 2:return r=e.sent,n=r.data,a=n.symbol,i=n.decimal_places,e.abrupt("return",{id:t.id,title:t.title,price:{currency:a,amount:Number(t.price),decimals:i},address:t.address.state_name,picture:t.thumbnail,condition:"new"===t.condition?"Nuevo":"Usado",free_shipping:t.shipping.free_shipping});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.t1=e.sent,e.t2=n.filters[0].values[0].path_from_root.map((function(e){return e.name})),e.abrupt("return",{author:e.t0,items:e.t1,categories:e.t2});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){return w.a.get("https://api.mercadolibre.com/items/".concat(e)).then((function(t){var r=t.data,n=r.currency_id,a=r.category_id;return Promise.all([w.a.get("https://api.mercadolibre.com/items/".concat(e,"/description")),w.a.get("https://api.mercadolibre.com/currencies/".concat(n)),w.a.get("https://api.mercadolibre.com/categories/".concat(a))]).then((function(e){var t=P(e,3),n=t[0],a=t[1],i=t[2];return{author:{name:"Nicolás",lastname:"Priano"},item:{id:r.id,title:r.title,price:{currency:a.data.symbol,amount:Number(r.price),decimals:a.data.decimal_places},picture:r.pictures[0]?r.pictures[0].url:r.thumbnail,pictures:r.pictures,condition:"new"===r.condition?"Nuevo":"Usado",free_shipping:r.shipping.free_shipping,sold_quantity:r.sold_quantity,description:n.data.plain_text,attributes:r.attributes.map((function(e){return{key:e.name,value:e.value_name}})),categories:i.data.path_from_root.map((function(e){return e.name}))}}}))}))};function F(e,t,r,n,a,i,c){try{var o=e[i](c),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,a)}var B=process.env.PORT||3e3,G=s()();G.use(s.a.static("server-build")),G.use(s.a.static("./build")),G.use("/items",L),G.use("/items/:id",$),G.get("/*",function(){var e,t=(e=regeneratorRuntime.mark((function e(t,r){var n,i,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n={data:t.meliContext},i=h.Helmet.renderStatic(),o=a.a.resolve("./build/index.html"),l=f.a.renderToString(u.a.createElement(p.StaticRouter,{location:t.url,context:n},u.a.createElement(C,null))),c.a.readFile(o,"utf8",(function(e,t){return e?(console.error("Something went wrong:",e),r.status(500).send("Oops, better luck next time!")):r.send(t.replace("<title>React App</title>",i.title.toString()).replace('<div id="root"></div>','<div id="root">'.concat(l,"</div>")).replace("</body>","<script>window.__ROUTE_DATA__ = ".concat(U()(n.data),"<\/script></body>")))})),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),console.error("Something went wrong:",e.t0),e.abrupt("return",r.status(500).send("Oops, better luck next time!",e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function c(e){F(i,n,a,c,o,"next",e)}function o(e){F(i,n,a,c,o,"throw",e)}c(void 0)}))});return function(e,r){return t.apply(this,arguments)}}()),G.listen(B,(function(){console.log("Server is listening on port ".concat(B))}))}]);